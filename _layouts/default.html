<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  {% seo %}
</head>
<body>
  <!-- ì½ê¸° ì§„í–‰ë¥  í‘œì‹œ -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="book-container">
    <!-- ì‚¬ì´ë“œë°” (ëª©ì°¨) -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="book-cover">
          <span class="book-icon">ğŸ“˜</span>
        </div>
        <h2 class="book-title">í´ë¡œë“œ ì½”ë“œ 2.0 ê°€ì´ë“œ</h2>
        <p class="book-subtitle">ì½”ë”© ì—ì´ì „íŠ¸ í™œìš©ë²•</p>
      </div>

      <nav class="toc">
        <h3 class="toc-title">ëª©ì°¨</h3>
        <ul class="toc-list">
          <li><a href="#1ì¥-ì„œë¡ -ë°-ë°°ê²½" data-chapter="1">1. ì„œë¡  ë° ë°°ê²½</a></li>
          <li><a href="#2ì¥-ì €ìì˜-ì—¬ì •" data-chapter="2">2. ì €ìì˜ ì—¬ì •</a></li>
          <li><a href="#3ì¥-ë¹„ê¸°ìˆ -ì‚¬ìš©ìë¥¼-ìœ„í•œ-ê¸°ìˆ -ì„¤ëª…" data-chapter="3">3. ê¸°ìˆ  ì„¤ëª…</a></li>
          <li><a href="#4ì¥-claude-code-20ì˜-ì‚¶ì˜-ì§ˆ-ê°œì„ -ê¸°ëŠ¥" data-chapter="4">4. QoL ê°œì„  ê¸°ëŠ¥</a></li>
          <li><a href="#5ì¥-ëª…ë ¹ì–´-ë°-ì»¤ìŠ¤í„°ë§ˆì´ì§•" data-chapter="5">5. ëª…ë ¹ì–´ & ì»¤ìŠ¤í„°ë§ˆì´ì§•</a></li>
          <li><a href="#6ì¥-ì„œë¸Œ-ì—ì´ì „íŠ¸-sub-agents" data-chapter="6">6. ì„œë¸Œ ì—ì´ì „íŠ¸</a></li>
          <li><a href="#7ì¥-task-ë„êµ¬" data-chapter="7">7. Task ë„êµ¬</a></li>
          <li><a href="#8ì¥-ì»¨í…ìŠ¤íŠ¸-ì—”ì§€ë‹ˆì–´ë§-ì‹¬ì¸µ-ë¶„ì„" data-chapter="8">8. ì»¨í…ìŠ¤íŠ¸ ì—”ì§€ë‹ˆì–´ë§</a></li>
          <li><a href="#9ì¥-ìŠ¤í‚¬-ë°-í”ŒëŸ¬ê·¸ì¸" data-chapter="9">9. ìŠ¤í‚¬ & í”ŒëŸ¬ê·¸ì¸</a></li>
          <li><a href="#10ì¥-í›…-hooks" data-chapter="10">10. í›… (Hooks)</a></li>
          <li><a href="#11ì¥-mcp-ì„œë²„-ë°-ì½”ë“œ-ì‹¤í–‰" data-chapter="11">11. MCP ì„œë²„</a></li>
          <li><a href="#12ì¥-ì €ìì˜-ê°œì¸-ì›Œí¬í”Œë¡œìš°" data-chapter="12">12. ì›Œí¬í”Œë¡œìš°</a></li>
          <li><a href="#13ì¥-opus-45ê°€-ë›°ì–´ë‚œ-ì´ìœ " data-chapter="13">13. Opus 4.5ì˜ ì¥ì </a></li>
          <li><a href="#14ì¥-ì‹œìŠ¤í…œ-ë¦¬ë§ˆì¸ë”" data-chapter="14">14. ì‹œìŠ¤í…œ ë¦¬ë§ˆì¸ë”</a></li>
          <li><a href="#15ì¥-ì»¨í…ìŠ¤íŠ¸-ê´€ë¦¬-ì „ëµ" data-chapter="15">15. ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬</a></li>
          <li><a href="#16ì¥-ë‹¤ë¥¸-ë„êµ¬ì™€ì˜-ë¹„êµ" data-chapter="16">16. ë„êµ¬ ë¹„êµ</a></li>
          <li><a href="#17ì¥-ì»¤ë®¤ë‹ˆí‹°-ë¦¬ì†ŒìŠ¤" data-chapter="17">17. ì»¤ë®¤ë‹ˆí‹° ë¦¬ì†ŒìŠ¤</a></li>
          <li><a href="#18ì¥-í•µì‹¬-ìš”ì•½" data-chapter="18">18. í•µì‹¬ ìš”ì•½</a></li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <div class="author-info">
          <span class="author-label">ì›ì €ì</span>
          <span class="author-name">Sankalp</span>
        </div>
      </div>
    </aside>

    <!-- ëª¨ë°”ì¼ í† ê¸€ ë²„íŠ¼ -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="ëª©ì°¨ ì—´ê¸°">
      <span class="hamburger"></span>
    </button>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="book-content">
      <article class="chapter">
        {{ content }}
      </article>

      <!-- ì±•í„° ë„¤ë¹„ê²Œì´ì…˜ -->
      <nav class="chapter-nav">
        <a href="#" class="nav-btn prev" id="prevChapter">
          <span class="nav-arrow">â†</span>
          <span class="nav-text">ì´ì „ ì±•í„°</span>
        </a>
        <span class="chapter-indicator" id="chapterIndicator">1 / 18</span>
        <a href="#" class="nav-btn next" id="nextChapter">
          <span class="nav-text">ë‹¤ìŒ ì±•í„°</span>
          <span class="nav-arrow">â†’</span>
        </a>
      </nav>

      <footer class="book-footer">
        <p>ì›ë¬¸: <a href="https://sankalp.bearblog.dev/my-experience-with-claude-code-20-and-how-to-get-better-at-using-coding-agents/" target="_blank">A Guide to Claude Code 2.0</a> by Sankalp</p>
        <p class="copyright">í•œêµ­ì–´ ë²ˆì—­ Â© 2025</p>
      </footer>
    </main>
  </div>

  <!-- ì˜¤ë²„ë ˆì´ -->
  <div class="overlay" id="overlay"></div>

  <script>
    // ì½ê¸° ì§„í–‰ë¥ 
    window.addEventListener('scroll', () => {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById('progressBar').style.width = scrolled + '%';
    });

    // ì‚¬ì´ë“œë°” í† ê¸€
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const overlay = document.getElementById('overlay');

    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      overlay.classList.toggle('show');
      sidebarToggle.classList.toggle('active');
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      sidebarToggle.classList.remove('active');
    });

    // ëª©ì°¨ ë§í¬ í´ë¦­ ì‹œ ì‚¬ì´ë“œë°” ë‹«ê¸° (ëª¨ë°”ì¼)
    document.querySelectorAll('.toc-list a').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 1024) {
          sidebar.classList.remove('open');
          overlay.classList.remove('show');
          sidebarToggle.classList.remove('active');
        }
      });
    });

    // í˜„ì¬ ì±•í„° í•˜ì´ë¼ì´íŠ¸
    const chapters = document.querySelectorAll('h2[id]');
    const tocLinks = document.querySelectorAll('.toc-list a');
    const chapterIndicator = document.getElementById('chapterIndicator');

    function updateActiveChapter() {
      let current = '';
      let currentIndex = 0;

      chapters.forEach((chapter, index) => {
        const sectionTop = chapter.offsetTop - 150;
        if (scrollY >= sectionTop) {
          current = chapter.getAttribute('id');
          currentIndex = index + 1;
        }
      });

      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });

      if (currentIndex > 0) {
        chapterIndicator.textContent = currentIndex + ' / ' + chapters.length;
      }
    }

    window.addEventListener('scroll', updateActiveChapter);

    // ì±•í„° ë„¤ë¹„ê²Œì´ì…˜
    const prevBtn = document.getElementById('prevChapter');
    const nextBtn = document.getElementById('nextChapter');

    function getCurrentChapterIndex() {
      let current = 0;
      chapters.forEach((chapter, index) => {
        const sectionTop = chapter.offsetTop - 150;
        if (scrollY >= sectionTop) {
          current = index;
        }
      });
      return current;
    }

    prevBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const currentIndex = getCurrentChapterIndex();
      if (currentIndex > 0) {
        chapters[currentIndex - 1].scrollIntoView({ behavior: 'smooth' });
      }
    });

    nextBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const currentIndex = getCurrentChapterIndex();
      if (currentIndex < chapters.length - 1) {
        chapters[currentIndex + 1].scrollIntoView({ behavior: 'smooth' });
      }
    });

    // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  </script>
</body>
</html>
